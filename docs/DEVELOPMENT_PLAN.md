# 开发计划文档

> 文档版本: v1.0.0  
> 更新日期: 2024-12-29

---

## 1. 项目概述

### 1.1 项目信息

| 项目 | 内容 |
|------|------|
| 项目名称 | 疫苗自动分拣传输控制系统 (VaccineADS) |
| 项目周期 | 25周 (约6个月) |
| 开发模式 | 敏捷开发 + 瀑布验证 |
| 迭代周期 | 2周/Sprint |

### 1.2 团队配置

| 角色 | 人数 | 职责 |
|------|------|------|
| 项目经理 | 1 | 项目管理、进度控制、风险管理 |
| 产品经理 | 1 | 需求管理、验收测试 |
| 架构师 | 1 | 技术架构、技术选型、核心模块设计 |
| C#开发 | 2 | 本地主控程序、PLC通信、WinForms界面 |
| Go开发 | 2 | API网关、业务服务、HIS对接 |
| Python开发 | 1 | 视觉识别、AI模型、数据分析 |
| 前端开发 | 1 | Web监控前端 |
| 测试工程师 | 1 | 测试用例、自动化测试、性能测试 |
| PLC工程师 | 1 | PLC程序开发、现场调试 |
| 运维工程师 | 1 | 部署、监控、运维 |

---

## 2. 项目里程碑

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    项目里程碑甘特图                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  阶段              第1月      第2月      第3月      第4月      第5月      第6月            │
│                   W1W2W3W4  W5W6W7W8  W9W10W11W12 W13W14W15W16 W17W18W19W20 W21W22W23W24W25│
│  ─────────────────────────────────────────────────────────────────────────────────────────  │
│                                                                                             │
│  █ 需求分析       ████                                                                     │
│    M1: 需求评审        ◆                                                                   │
│                                                                                             │
│  █ 架构设计           ████                                                                 │
│    M2: 架构评审            ◆                                                               │
│                                                                                             │
│  █ 详细设计               ████                                                             │
│    M3: 设计评审                ◆                                                           │
│                                                                                             │
│  █ 核心开发                   ████████                                                     │
│    M4: Alpha版本                      ◆                                                    │
│                                                                                             │
│  █ 功能完善                           ████████                                             │
│    M5: Beta版本                               ◆                                            │
│                                                                                             │
│  █ 集成测试                                   ████████                                     │
│    M6: RC版本                                         ◆                                    │
│                                                                                             │
│  █ 试运行                                             ████                                 │
│    M7: 正式发布                                           ◆                               │
│                                                                                             │
│  图例: ████ 进行中  ◆ 里程碑                                                              │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

### 2.1 里程碑定义

| 里程碑 | 日期 | 交付物 | 验收标准 |
|--------|------|--------|----------|
| M1 需求评审 | 第2周 | PRD、用例文档 | 需求评审通过 |
| M2 架构评审 | 第4周 | 架构设计、接口规范 | 架构评审通过 |
| M3 设计评审 | 第6周 | 详细设计、数据库设计 | 设计评审通过 |
| M4 Alpha版本 | 第12周 | 核心功能可运行 | 内部演示通过 |
| M5 Beta版本 | 第16周 | 全功能可测试 | 功能测试通过 |
| M6 RC版本 | 第20周 | 准生产版本 | 集成测试通过 |
| M7 正式发布 | 第24周 | v1.0正式版 | 验收测试通过 |

---

## 3. 迭代计划

### Sprint 1-2: 需求分析 (第1-4周)

**目标**: 完成需求分析和架构设计

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| 业务调研 | 产品经理 | 5 | 调研报告 |
| 需求分析 | 产品经理 | 5 | PRD文档 |
| 用例设计 | 产品经理 | 3 | 用例文档 |
| 技术预研 | 架构师 | 5 | 预研报告 |
| 架构设计 | 架构师 | 5 | 架构文档 |
| 接口设计 | 架构师 | 3 | API规范 |
| 数据库设计 | 架构师 | 3 | ER图、DDL |
| 环境搭建 | 运维 | 3 | 开发环境 |

### Sprint 3-4: 基础框架 (第5-8周)

**目标**: 搭建各模块基础框架

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| C#项目框架 | C#开发 | 5 | 项目骨架 |
| PLC通信模块 | C#开发 | 8 | Modbus通信组件 |
| Go项目框架 | Go开发 | 5 | 项目骨架 |
| 认证授权模块 | Go开发 | 5 | JWT认证 |
| Python项目框架 | Python开发 | 3 | 项目骨架 |
| 相机驱动 | Python开发 | 5 | 相机SDK封装 |
| 前端项目框架 | 前端开发 | 5 | React项目 |
| 数据库初始化 | 运维 | 2 | 数据库脚本 |
| PLC程序框架 | PLC工程师 | 5 | 基础程序 |

### Sprint 5-6: 核心功能-设备层 (第9-12周)

**目标**: 完成PLC通信和设备控制

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| PLC I/O程序 | PLC工程师 | 10 | 完整PLC程序 |
| 货道控制 | C#开发 | 8 | 货道控制模块 |
| 皮带控制 | C#开发 | 5 | 皮带控制模块 |
| 温度采集 | C#开发 | 5 | 温度采集模块 |
| 报警处理 | C#开发 | 3 | 报警模块 |
| 设备状态服务 | Go开发 | 5 | 设备API |
| 条码识别 | Python开发 | 5 | 条码解析 |
| 视觉识别 | Python开发 | 8 | YOLO模型训练 |

### Sprint 7-8: 核心功能-业务层 (第13-16周)

**目标**: 完成业务功能开发

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| 库存管理服务 | Go开发 | 8 | 库存API |
| 订单处理服务 | Go开发 | 8 | 订单API |
| 分拣调度服务 | Go开发 | 8 | 分拣逻辑 |
| 追溯管理服务 | Go开发 | 5 | 追溯API |
| 温度监控服务 | Go开发 | 5 | 温度API |
| HIS对接 | Go开发 | 8 | HL7对接 |
| WinForms主界面 | C#开发 | 10 | 主控界面 |
| 监控仪表盘 | 前端开发 | 10 | Web仪表盘 |

### Sprint 9-10: 功能完善 (第17-20周)

**目标**: 完善功能和用户界面

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| 报警管理 | Go开发 | 5 | 报警API |
| 报表统计 | Go开发 | 5 | 统计API |
| 用户权限 | Go开发 | 5 | 权限模块 |
| WebSocket实时推送 | Go开发 | 5 | 实时通信 |
| 视觉验证优化 | Python开发 | 5 | 模型优化 |
| 库存管理页面 | 前端开发 | 5 | Web页面 |
| 追溯查询页面 | 前端开发 | 5 | Web页面 |
| 设置页面 | 前端开发 | 3 | Web页面 |
| 界面优化 | C#开发 | 5 | UI优化 |

### Sprint 11-12: 集成测试 (第21-24周)

**目标**: 系统集成和测试

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| 集成联调 | 全体开发 | 10 | 联调报告 |
| 功能测试 | 测试 | 10 | 测试报告 |
| 性能测试 | 测试 | 5 | 性能报告 |
| 安全测试 | 测试 | 3 | 安全报告 |
| Bug修复 | 全体开发 | 10 | 修复清单 |
| 文档完善 | 全体 | 5 | 用户手册 |
| 部署脚本 | 运维 | 3 | 部署文档 |

### Sprint 13: 试运行 (第25周)

**目标**: 现场部署和试运行

| 任务 | 负责人 | 工时(人天) | 交付物 |
|------|--------|------------|--------|
| 现场部署 | 运维+开发 | 3 | 部署完成 |
| 现场调试 | PLC工程师+开发 | 3 | 调试完成 |
| 用户培训 | 产品经理 | 2 | 培训完成 |
| 试运行监控 | 运维 | 2 | 监控报告 |
| 问题修复 | 开发 | 3 | 问题清单 |
| 验收交付 | 项目经理 | 2 | 验收报告 |

---

## 4. 详细开发任务

### 4.1 C# 开发任务分解

```
VaccineControlSystem/
├── Phase 1: 基础框架 (Sprint 3-4)
│   ├── [ ] 项目结构搭建
│   ├── [ ] 日志框架 (NLog)
│   ├── [ ] 配置管理
│   ├── [ ] Modbus TCP 客户端
│   └── [ ] gRPC 客户端
│
├── Phase 2: 设备控制 (Sprint 5-6)
│   ├── [ ] PLC连接管理
│   ├── [ ] 货道控制器
│   ├── [ ] 皮带线控制器
│   ├── [ ] 温度采集器
│   ├── [ ] 传感器状态采集
│   ├── [ ] 报警控制器
│   └── [ ] 设备心跳监测
│
├── Phase 3: 业务逻辑 (Sprint 7-8)
│   ├── [ ] 分拣任务调度
│   ├── [ ] 库存本地缓存
│   ├── [ ] 订单队列管理
│   ├── [ ] 视觉验证调用
│   └── [ ] 与Go服务通信
│
├── Phase 4: 用户界面 (Sprint 7-10)
│   ├── [ ] 主窗体布局
│   ├── [ ] 货道矩阵控件
│   ├── [ ] 状态监控面板
│   ├── [ ] 任务队列面板
│   ├── [ ] 报警提示
│   ├── [ ] 操作记录
│   └── [ ] 系统设置
│
└── Phase 5: 优化完善 (Sprint 11-12)
    ├── [ ] 异常处理完善
    ├── [ ] 性能优化
    ├── [ ] 日志完善
    └── [ ] 单元测试
```

### 4.2 Go 开发任务分解

```
go-gateway/
├── Phase 1: 基础框架 (Sprint 3-4)
│   ├── [ ] 项目结构搭建
│   ├── [ ] Gin框架配置
│   ├── [ ] 数据库连接 (GORM)
│   ├── [ ] Redis连接
│   ├── [ ] JWT认证
│   ├── [ ] 中间件 (日志、限流、CORS)
│   └── [ ] gRPC服务端
│
├── Phase 2: 核心服务 (Sprint 5-8)
│   ├── [ ] 疫苗管理API
│   ├── [ ] 库存管理API
│   ├── [ ] 订单处理API
│   ├── [ ] 分拣调度服务
│   ├── [ ] 追溯管理API
│   ├── [ ] 温度监控API
│   ├── [ ] 设备状态API
│   └── [ ] 报警管理API
│
├── Phase 3: 对接服务 (Sprint 7-8)
│   ├── [ ] HIS系统对接
│   ├── [ ] 国家追溯平台对接
│   └── [ ] WebSocket实时推送
│
├── Phase 4: 辅助功能 (Sprint 9-10)
│   ├── [ ] 用户管理
│   ├── [ ] 角色权限
│   ├── [ ] 操作日志
│   ├── [ ] 报表统计
│   └── [ ] 系统配置
│
└── Phase 5: 优化完善 (Sprint 11-12)
    ├── [ ] 单元测试
    ├── [ ] 集成测试
    ├── [ ] API文档
    └── [ ] 性能优化
```

### 4.3 Python 开发任务分解

```
python-vision/
├── Phase 1: 基础框架 (Sprint 3-4)
│   ├── [ ] 项目结构搭建
│   ├── [ ] 相机SDK封装 (海康)
│   ├── [ ] gRPC服务端
│   └── [ ] 日志配置
│
├── Phase 2: 视觉识别 (Sprint 5-6)
│   ├── [ ] 图像采集
│   ├── [ ] 图像预处理
│   ├── [ ] YOLO模型训练
│   ├── [ ] 疫苗检测
│   ├── [ ] 条码识别 (pyzbar)
│   └── [ ] OCR识别 (PaddleOCR)
│
├── Phase 3: 业务功能 (Sprint 7-8)
│   ├── [ ] 疫苗验证服务
│   ├── [ ] 溯源码解析
│   └── [ ] 识别结果存储
│
├── Phase 4: 数据分析 (Sprint 9-10)
│   ├── [ ] 温度趋势预测
│   ├── [ ] 异常检测
│   └── [ ] 库存预测
│
└── Phase 5: 优化完善 (Sprint 11-12)
    ├── [ ] 模型优化
    ├── [ ] 性能优化
    └── [ ] 单元测试
```

### 4.4 前端开发任务分解

```
vaccine-monitor/
├── Phase 1: 基础框架 (Sprint 3-4)
│   ├── [ ] Vite + React + TS 搭建
│   ├── [ ] 路由配置
│   ├── [ ] 状态管理 (Zustand)
│   ├── [ ] UI组件库 (Ant Design)
│   ├── [ ] HTTP客户端 (Axios)
│   └── [ ] WebSocket客户端
│
├── Phase 2: 核心页面 (Sprint 7-8)
│   ├── [ ] 登录页面
│   ├── [ ] 仪表盘
│   ├── [ ] 货道矩阵视图
│   ├── [ ] 温度监控图表
│   └── [ ] 实时数据推送
│
├── Phase 3: 业务页面 (Sprint 9-10)
│   ├── [ ] 疫苗管理
│   ├── [ ] 库存管理
│   ├── [ ] 订单管理
│   ├── [ ] 追溯查询
│   ├── [ ] 报警中心
│   └── [ ] 报表统计
│
├── Phase 4: 系统功能 (Sprint 9-10)
│   ├── [ ] 用户管理
│   ├── [ ] 角色权限
│   ├── [ ] 系统设置
│   └── [ ] 操作日志
│
└── Phase 5: 优化完善 (Sprint 11-12)
    ├── [ ] 响应式适配
    ├── [ ] 性能优化
    ├── [ ] E2E测试
    └── [ ] 国际化
```

---

## 5. 风险管理

### 5.1 风险识别

| 风险 | 概率 | 影响 | 等级 | 应对措施 |
|------|------|------|------|----------|
| PLC通信不稳定 | 中 | 高 | 高 | 预留调试时间，准备备用方案 |
| 视觉识别准确率不足 | 中 | 高 | 高 | 多轮训练优化，双重验证 |
| HIS对接困难 | 高 | 中 | 高 | 提前沟通接口，预留对接时间 |
| 硬件到货延迟 | 中 | 高 | 高 | 提前采购，软件仿真开发 |
| 人员变动 | 低 | 中 | 中 | 知识分享，文档完善 |
| 需求变更 | 高 | 中 | 高 | 变更管理流程，预留缓冲 |

### 5.2 风险应对

```
┌─────────────────────────────────────────────────────────────────┐
│                        风险应对矩阵                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│           高影响                                                 │
│              │                                                  │
│              │    ┌─────────┐        ┌─────────┐               │
│              │    │ PLC通信 │        │ HIS对接 │               │
│              │    │(规避/转移)│       │(规避/缓解)│              │
│              │    └─────────┘        └─────────┘               │
│              │                                                  │
│              │    ┌─────────┐        ┌─────────┐               │
│              │    │视觉识别 │        │硬件延迟 │               │
│              │    │(缓解/接受)│       │(规避/转移)│              │
│              │    └─────────┘        └─────────┘               │
│              │                                                  │
│           低影响 ─────────────────────────────────── 高概率    │
│              │                                                  │
│              │    ┌─────────┐        ┌─────────┐               │
│              │    │人员变动 │        │需求变更 │               │
│              │    │ (接受)  │        │ (缓解)  │               │
│              │    └─────────┘        └─────────┘               │
│              │                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 质量保证

### 6.1 代码规范

| 语言 | 规范 | 工具 |
|------|------|------|
| C# | Microsoft C# Coding Conventions | StyleCop |
| Go | Effective Go | golint, gofmt |
| Python | PEP 8 | pylint, black |
| TypeScript | Airbnb Style Guide | ESLint, Prettier |

### 6.2 测试策略

| 测试类型 | 覆盖率要求 | 负责人 |
|----------|------------|--------|
| 单元测试 | ≥80% | 开发人员 |
| 集成测试 | 核心流程100% | 测试工程师 |
| E2E测试 | 核心场景100% | 测试工程师 |
| 性能测试 | 达标 | 测试工程师 |
| 安全测试 | 无高危漏洞 | 安全工程师 |

### 6.3 代码审查

- 所有代码必须经过 Code Review
- PR 需至少 1 人 Approve
- 核心模块需架构师审查
- 使用 GitLab/GitHub 管理

---

## 7. 沟通计划

### 7.1 会议安排

| 会议 | 频率 | 时长 | 参与人 |
|------|------|------|--------|
| 每日站会 | 每日 | 15min | 开发团队 |
| Sprint计划 | 双周 | 2h | 全体 |
| Sprint回顾 | 双周 | 1h | 全体 |
| 技术评审 | 按需 | 2h | 技术人员 |
| 项目周会 | 每周 | 1h | 管理层 |

### 7.2 文档管理

| 文档类型 | 存储位置 | 更新频率 |
|----------|----------|----------|
| 需求文档 | Confluence | 按需 |
| 设计文档 | Confluence | 按需 |
| API文档 | Swagger | 实时 |
| 用户手册 | Confluence | 版本发布 |
| 会议纪要 | 企业微信 | 会后 |

---

## 8. 交付物清单

### 8.1 文档交付

- [ ] 产品需求文档 (PRD)
- [ ] 系统架构设计文档
- [ ] 数据库设计文档
- [ ] API接口规范文档
- [ ] 部署运维手册
- [ ] 用户操作手册
- [ ] 测试报告
- [ ] 培训材料

### 8.2 软件交付

- [ ] C# 本地主控程序安装包
- [ ] Go 后端服务 Docker 镜像
- [ ] Python 视觉服务 Docker 镜像
- [ ] Web 前端静态资源
- [ ] PLC 程序源码
- [ ] 数据库初始化脚本
- [ ] 部署脚本

### 8.3 硬件配合

- [ ] PLC程序烧录
- [ ] 设备调试报告
- [ ] 现场验收报告

---

> 文档审批：
> - 项目经理: __________ 日期: __________
> - 技术负责人: __________ 日期: __________

